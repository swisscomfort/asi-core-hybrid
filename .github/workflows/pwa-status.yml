name: ðŸ“Š PWA Status Check

on:
  schedule:
    # Jeden Tag um 6:00 UTC prÃ¼fen
    - cron: "0 6 * * *"
  workflow_dispatch:

jobs:
  check-pwa-status:
    runs-on: ubuntu-latest

    steps:
      - name: ðŸ” Check PWA Availability
        run: |
          PWA_URL="https://${{ github.repository_owner }}.github.io/asi-core/"

          echo "ðŸŒ PrÃ¼fe PWA-Status: $PWA_URL"

          # HTTP Status prÃ¼fen
          if curl -f -s -o /dev/null "$PWA_URL"; then
            echo "âœ… PWA ist online und erreichbar!"
            
            # Service Worker prÃ¼fen
            if curl -f -s "$PWA_URL/sw.js" > /dev/null; then
              echo "âœ… Service Worker verfÃ¼gbar"
            else
              echo "âš ï¸ Service Worker nicht gefunden"
            fi
            
            # Manifest prÃ¼fen
            if curl -f -s "$PWA_URL/manifest.json" > /dev/null; then
              echo "âœ… PWA Manifest verfÃ¼gbar"
            else
              echo "âš ï¸ PWA Manifest nicht gefunden"
            fi
            
          else
            echo "âŒ PWA ist nicht erreichbar!"
            echo "ðŸ”§ MÃ¶gliche Ursachen:"
            echo "   - GitHub Pages nicht aktiviert"
            echo "   - Deployment-Fehler"
            echo "   - Build-Probleme"
            exit 1
          fi

      - name: ðŸ“ˆ Performance Check
        run: |
          echo "ðŸ“Š Basic Performance Check..."
          time curl -s "https://${{ github.repository_owner }}.github.io/asi-core/" > /dev/null
          echo "âœ… Ladezeit-Check abgeschlossen"
